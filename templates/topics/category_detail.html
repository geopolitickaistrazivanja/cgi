{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load core_urls %}

{% block title %}{{ category.get_name }} - CGI{% endblock %}
{% block canonical_url %}<link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{% lang_url 'topics:category_detail' category.get_slug %}">{% endblock %}

{% block content %}
<div class="category-detail-page">
    <div class="container">
        <h1 class="page-title">{{ category.get_name }}</h1>
        <div class="topic-grid">
            {% for topic in topics %}
                <article class="topic-card">
                    <a href="{% lang_url 'topics:topic_detail' category.get_slug topic.get_slug %}">
                        {% if topic.thumbnail %}
                            <img src="{{ topic.thumbnail.url }}" alt="{{ topic.get_title }}">
                        {% else %}
                            <div class="topic-placeholder">{% trans 'Nema slike' %}</div>
                        {% endif %}
                        <div class="topic-card-content">
                            <h2>{{ topic.get_title }}</h2>
                            {% if topic.get_short_description %}
                                <p>{{ topic.get_short_description|striptags|truncatewords:30 }}</p>
                            {% endif %}
                            <span class="topic-date">{{ topic.created_at|date:"d.m.Y" }}</span>
                        </div>
                    </a>
                </article>
            {% empty %}
                <p>{% trans 'Nema tema u ovoj kategoriji.' %}</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
