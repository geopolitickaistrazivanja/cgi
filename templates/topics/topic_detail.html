{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load core_urls %}

{% block title %}{{ topic.get_meta_title }} - CGI{% endblock %}
{% block meta_description %}{{ topic.get_meta_description|default:_("CGI - Centar za geopolitička istraživanja") }}{% endblock %}
{% block canonical_url %}<link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{% lang_url 'topics:topic_detail' category.get_slug topic.get_slug %}">{% endblock %}

{% block content %}
<div class="topic-detail-page">
    <div class="container">
        <article class="topic-post">
            <h1>{{ topic.get_title }}</h1>
            <p class="topic-meta">{{ topic.created_at|date:"d.m.Y" }}</p>
            {% if topic.get_short_description %}
                <p class="topic-short-description">{{ topic.get_short_description|striptags }}</p>
            {% endif %}
            <div class="topic-content">
                {{ topic.get_full_description|safe }}
            </div>
        </article>

        {% if recent_topics %}
            <section class="recent-topics">
                <h2>{% trans 'Najnovije teme' %}</h2>
                <div class="topic-grid">
                    {% for recent_topic in recent_topics %}
                        <article class="topic-card">
                            <a href="{% lang_url 'topics:topic_detail' category.get_slug recent_topic.get_slug %}">
                                {% if recent_topic.thumbnail %}
                                    <img src="{{ recent_topic.thumbnail.url }}" alt="{{ recent_topic.get_title }}">
                                {% else %}
                                    <div class="topic-placeholder">Nema slike</div>
                                {% endif %}
                                <div class="topic-card-content">
                                    <h2>{{ recent_topic.get_title }}</h2>
                                    <span class="topic-date">{{ recent_topic.created_at|date:"d.m.Y" }}</span>
                                </div>
                            </a>
                        </article>
                    {% endfor %}
                </div>
            </section>
        {% endif %}
    </div>
</div>
{% endblock %}

